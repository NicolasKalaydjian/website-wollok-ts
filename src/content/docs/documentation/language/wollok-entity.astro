---
import Badge from "@astrojs/starlight/components/Badge.astro";
import { Class, Singleton, Mixin } from "wollok-ts";
import { methodLabel, wollokDoc } from "./utils";

interface Props {
    entity: Class | Singleton | Mixin;
}

const { entity } = Astro.props;
---

<h4><Badge variant="success" text={entity.kind} />{entity.name}</h4>

{
    entity.fields.length > 0 && (
        <div>
            <h5>Estado</h5>

            <table style="width:100%">
                <tr>
                    <th>Atributo</th>
                    <th style="width:60%">WollokDoc</th>
                </tr>
                {entity.fields.map((field) => (
                    <tr>
                        <td>
                            {field.isConstant && (
                                <Badge variant="note" text="const" />
                            )}
                            {field.isProperty && (
                                <Badge variant="caution" text="property" />
                            )}
                            <strong>{field.name}</strong>
                        </td>
                        <td>{wollokDoc(field)}</td>
                    </tr>
                ))}
            </table>

            <h5>Comportamiento</h5>
        </div>
    )
}

<table style="width:100%">
    <tr>
        <th>MÃ©todo</th>
        <th style="width:60%">WollokDoc</th>
    </tr>
    {
        entity.methods
        .filter(method => !method.isSynthetic)
        .map(method => (
            <tr>
                <td>
                    {method.isOverride && (
                        <Badge variant="note" text="override" />
                    )}
                    {method.isAbstract() && (
                        <Badge variant="caution" text="abstract" />
                    )}
                    {method.isNative() && (
                        <Badge variant="danger" text="native" />
                    )}
                    <strong>{methodLabel(method)}</strong>
                </td>
                <td>{wollokDoc(method)}</td>
            </tr>
        ))
    }
</table>
